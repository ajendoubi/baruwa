{% extends 'base.html' %}
{% block body_class%}{%if pie_data.scores and pie_data.count%} class="tundra"{%endif%}{%endblock body_class%}
{% block headers %}{% if pie_data.scores and pie_data.count %}
<link rel="stylesheet" type="text/css" href="{{ MEDIA_URL }}js/dijit/themes/tundra/tundra.css" />
<script type="text/javascript">
    var djConfig = { parseOnLoad:true, isDebug:false };
</script>
<script type="text/javascript" src="{{ MEDIA_URL }}js/dojo/dojo.js"></script>
<script type="text/javascript">
//<![CDATA[
dojo.require("dojox.charting.Chart2D");
dochart = function(){
{% if active_filters %}
dojo.byId("fhl").style.display = "none";
dojo.create("a",{href:"#",innerHTML:"&darr;&nbsp;Show filters",id:"filter-toggle"},"fhl","before");
dojo.connect(dojo.byId("filter-toggle"),"onclick",function(e){
        e.preventDefault();
        em = dojo.byId("fhl");
        if(em.style.display == "block"){
            em.style.display = "none";
            dojo.byId("filter-toggle").innerHTML = "&darr;&nbsp;Show filters";
        }else{
            em.style.display = "block";
            dojo.byId("filter-toggle").innerHTML = "&uarr;&nbsp;Hide filters";
        }
});
{% endif %}
    var sagraph = new dojox.charting.Chart2D("sagraph");
    sagraph.addPlot("default", {type: "ClusteredColumns",gap:1});
    sagraph.addAxis("x"{% if pie_data.scores%},{labels: [{% for i in pie_data.scores%}{% if not forloop.last %}
{value:{{forloop.counter}}, text:"{{i}}"},{% else %}{value:{{forloop.counter}}, text:"{{i}}"}{% endif %}{%endfor%}
],majorTickStep:10}{%endif%});
    sagraph.addAxis("y", {vertical: true});
    sagraph.addSeries("SA scores", {{pie_data.count|safe}},{stroke: {color: "black"}, fill: "blue"});
    sagraph.render();
};
dojo.addOnLoad(dochart);
//]]>
</script>{%endif%}
{% endblock headers %}
{% block submenu %}
&nbsp;
{% endblock submenu %}
{% block title %}
Reports - {{report_title}}
{% endblock title %}
{% block heading %}
Reports - {{report_title}}
{% endblock heading %}
{% block content %}
<div class="White_div">
	<div id="sagraph" style="width: 950px; height: 250px;">
		<noscript>Enable javascript to view graphs</noscript>
	</div>
</div>
<div class="header_div">
	<div class="SA_score">
		Score
	</div>
	<div class="SA_count">
		Count
	</div>
</div>
{% for item in top_items %}
	<div class="{% cycle 'LightBlue_div' 'LightGray_div' %}">
		<div class="SA_score">
			{{ item.score }}
		</div>
		<div class="SA_count">
			{{ item.count }}
		</div>
	</div>
{% empty %}
	<div class="spanrow">
		No items returned
	</div>
{% endfor %}
{% if active_filters %}
<div class="lightblue_div">
	<div class="filterrow">
        Filters have been applied :
        <span id="fhl">
            {% for f in active_filters %}
            		"<a href="{% url reports-index %}#active_filters">{{f.filter_field}} {{f.filter_by}} {{f.filter_value}}</a>"
					{% if not forloop.last %},{% endif %}
            {% endfor %}
        </span>
    </div>
</div>
{% endif %}
{% endblock content %}
